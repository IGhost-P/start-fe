(()=>{"use strict";const t="todos";function e(){const e=window.localStorage.getItem(t)||"[]";return JSON.parse(e)}function s({$target:t,initialState:e,onClick:s}){this.state=e,this.setState=function(t){this.state=t,this.render()},this.render=function(){t.innerHTML=this.makeMarkup()},this.makeMarkup=function(){return`\n                <ul>\n                    ${this.state.map(((t,e)=>`\n                        <li data-index="${e}" class="${t.isDone?"checked":""}">\n                            <button class="delete">Ã—</button>\n                            <input type="checkbox" class="toggle-checked" ${t.isDone?"checked":""} />\n                            <span class="text">${t.title}</span>\n                        </li>\n                    `)).join("")}\n                </ul>\n            `},this.deleteTodo=function(t){this.state.splice(t,1)},this.toggleTodo=function(t){this.state[t].isDone=!this.state[t].isDone},t.addEventListener("click",(t=>{const e=parseInt(t.target.parentNode.dataset.index,10);"delete"===t.target.className?this.deleteTodo(e):"toggle-checked"===t.target.className&&this.toggleTodo(e),s({todos:[...this.state]})})),this.render()}function n({$target:t,onSubmit:e}){this.$input=t.querySelector("input"),t.addEventListener("submit",(t=>{t.preventDefault();const s={title:this.$input.value,isDone:!1};e(s),this.$input.value=""}))}const i=t=>document.querySelector(t);console.log("app is running"),new function({$target:o}){const a=i("#todos"),c=i(".new-task");this.state={todos:e()||[]},this.setState=function(e){var s;console.log(e),this.state=e,l.setState(this.state.todos),s=this.state.todos,window.localStorage.setItem(t,JSON.stringify(s))};const l=new s({$target:a,initialState:[...this.state.todos],onClick:t=>{this.setState(t)}});new n({$target:c,onSubmit:t=>{this.setState({todos:[...this.state.todos,t]})}})}({$target:i(".container")})})();